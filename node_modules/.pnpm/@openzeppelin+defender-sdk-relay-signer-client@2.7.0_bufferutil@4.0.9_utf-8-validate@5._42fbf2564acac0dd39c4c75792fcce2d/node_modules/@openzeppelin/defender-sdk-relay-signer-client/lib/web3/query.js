"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DefenderRelayQueryProvider = void 0;
const relayer_1 = require("../relayer");
const utils_1 = require("../ethers/utils");
class DefenderRelayQueryProvider {
    constructor(relayerCredentials) {
        this.id = 1;
        this.toJsonRpcResponse = (payload) => ({
            jsonrpc: '2.0',
            id: payload.id ?? this.id++,
            result: payload.result,
        });
        this.relayer = (0, utils_1.isRelayer)(relayerCredentials) ? relayerCredentials : new relayer_1.Relayer(relayerCredentials);
    }
    async request(payload) {
        return this.relayer.call({ method: payload.method, params: payload.params ?? [] }).then((this.toJsonRpcResponse));
    }
}
exports.DefenderRelayQueryProvider = DefenderRelayQueryProvider;
